{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Web3 from'web3';import Election from'../../build/Election.json';var myStryle={color:\"black\",marginLeft:\"20px\"};var divStyle={backgroundColor:\"lightblue\",marginTop:\"10px\",borderRadius:\"10px\"};var buttonStyle={marginLeft:\"20px\",marginBottom:\"10px\",borderRadius:\"10px\"};var NewCandidate=/*#__PURE__*/function(_Component){_inherits(NewCandidate,_Component);var _super=_createSuper(NewCandidate);function NewCandidate(props){var _this;_classCallCheck(this,NewCandidate);_this=_super.call(this,props);_this.handleInputChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.handleSubmit=function(e){e.preventDefault();_this.addCandidates();};_this.state={account:'',election:null,candidate_name:null,candidate_details:null,id:null};_this.addCandidates=_this.addCandidates.bind(_assertThisInitialized(_this));return _this;}_createClass(NewCandidate,[{key:\"componentWillMount\",value:function(){var _componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.loadWeb3();case 2:_context.next=4;return this.loadBlockChain();case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentWillMount(){return _componentWillMount.apply(this,arguments);}return componentWillMount;}()},{key:\"loadWeb3\",value:function(){var _loadWeb=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.ethereum){_context2.next=6;break;}window.web3=new Web3(window.ethereum);_context2.next=4;return window.ethereum.enable();case 4:_context2.next=7;break;case 6:if(window.web3){window.web3=new Web3(window.web3.currentProvider);}else{window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');}case 7:case\"end\":return _context2.stop();}}},_callee2);}));function loadWeb3(){return _loadWeb.apply(this,arguments);}return loadWeb3;}()},{key:\"loadBlockChain\",value:function(){var _loadBlockChain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var web3,accounts,networkId,networkData,election;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:web3=window.web3;_context3.next=3;return web3.eth.getAccounts();case 3:accounts=_context3.sent;this.setState({account:accounts[0]});_context3.next=7;return web3.eth.net.getId();case 7:networkId=_context3.sent;networkData=Election.networks[networkId];if(networkData){election=new web3.eth.Contract(Election.abi,networkData.address);this.setState({election:election});}else{window.alert('Election contract not deployed to detected network.');}case 10:case\"end\":return _context3.stop();}}},_callee3,this);}));function loadBlockChain(){return _loadBlockChain.apply(this,arguments);}return loadBlockChain;}()},{key:\"addCandidates\",value:function addCandidates(){var _this2=this;console.log(this.state);this.setState({loading:true});this.state.election.methods.addCandidate(this.state.candidate_name,this.state.candidate_details,this.state.id).send({from:this.state.account}).once('receipt',function(receipt){console.log(receipt);_this2.setState({loading:false});window.location.assign(\"/elections\");});}},{key:\"componentDidMount\",value:function componentDidMount(){var id=this.props.match.params.id;this.setState({id:id});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{class:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{class:\"row\"},/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-6 login-section-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{class:\"login-wrapper my-auto\"},/*#__PURE__*/React.createElement(\"h1\",{class:\"login-title\"},\"Add New Candidate\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Candidate Name\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"candidate_name\",name:\"candidate_name\",placeholder:\"Name\",onChange:this.handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Candidate details\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"candidate_details\",name:\"candidate_details\",placeholder:\"Party Name\",onChange:this.handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-warning \",type:\"submit\",name:\"action\"},\"Submit\")))),/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-6 px-0 d-none d-sm-block\"},/*#__PURE__*/React.createElement(\"img\",{src:\"login.jpg\",alt:\"login image\",class:\"login-img\"}))));}}]);return NewCandidate;}(Component);export default NewCandidate;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/e-voting-Machine-using-blockchain-main/server/blockchain/src/components/custom/NewCandidate.js"],"names":["React","Component","Web3","Election","myStryle","color","marginLeft","divStyle","backgroundColor","marginTop","borderRadius","buttonStyle","marginBottom","NewCandidate","props","handleInputChange","e","setState","target","id","value","handleSubmit","preventDefault","addCandidates","state","account","election","candidate_name","candidate_details","bind","loadWeb3","loadBlockChain","window","ethereum","web3","enable","currentProvider","alert","eth","getAccounts","accounts","net","getId","networkId","networkData","networks","Contract","abi","address","console","log","loading","methods","addCandidate","send","from","once","receipt","location","assign","match","params"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport Election from '../../build/Election.json'\n\nconst myStryle ={\n    color:\"black\",\n    marginLeft:\"20px\",\n}\n\nconst divStyle = {\n    backgroundColor:\"lightblue\" ,\n    marginTop :\"10px\", \n    borderRadius:\"10px\"\n}\n\n\nconst buttonStyle ={\n    marginLeft:\"20px\",\n    marginBottom:\"10px\",\n    borderRadius:\"10px\"\n}\n\nclass NewCandidate extends Component{\n\n    async componentWillMount() {\n        await this.loadWeb3()\n        await this.loadBlockChain()\n    }\n    \n    async loadWeb3() {\n        if (window.ethereum) {\n            window.web3 = new Web3(window.ethereum)\n            await window.ethereum.enable()\n        }\n        else if (window.web3) {\n            window.web3 = new Web3(window.web3.currentProvider)\n        }\n        else {\n            window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n        }\n    }\n    \n\n    handleInputChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value,\n        })\n    }\n\n    async loadBlockChain(){\n        const web3 = window.web3\n        const accounts = await web3.eth.getAccounts()\n        this.setState({ account: accounts[0] })\n        const networkId = await web3.eth.net.getId()\n        const networkData = Election.networks[networkId]\n        if(networkData) {\n            const election = new web3.eth.Contract(Election.abi, networkData.address)\n            this.setState({ election })\n        } else {\n            window.alert('Election contract not deployed to detected network.')\n        }\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.addCandidates();\n    }\n    \n    addCandidates() {\n        console.log(this.state);\n        this.setState({ loading: true })\n        this.state.election.methods.addCandidate(this.state.candidate_name, this.state.candidate_details, this.state.id).send({ from: this.state.account })\n        .once('receipt', (receipt) => {\n            console.log(receipt);\n          this.setState({ loading: false })\n          window.location.assign(\"/elections\");\n        })\n    }\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n          account: '',\n          election: null,\n          candidate_name: null,\n          candidate_details: null,\n          id: null\n        }\n        this.addCandidates = this.addCandidates.bind(this)\n    }\n\n    componentDidMount(){\n        let id = this.props.match.params.id;\n        this.setState({\n            id: id,\n        })\n    }\n\n    render(){\n        return(\n            <div class=\"container-fluid\">\n            <div class=\"row\">\n              <div class=\"col-sm-6 login-section-wrapper\">\n\n                <div class=\"login-wrapper my-auto\">\n                  <h1 class=\"login-title\">Add New Candidate</h1>\n            {/* <div className=\"container\" style={divStyle}> */}\n                <form onSubmit={this.handleSubmit}>\n                <label htmlFor=\"name\" >Candidate Name</label><br></br>\n                    <input type=\"text\" id=\"candidate_name\" name=\"candidate_name\" placeholder=\"Name\" onChange={this.handleInputChange} required/>\n                    <br />\n                    <label htmlFor=\"name\">Candidate details</label>\n                    <br />\n                    <input type=\"text\" id=\"candidate_details\" name=\"candidate_details\" placeholder=\"Party Name\" onChange={this.handleInputChange} required/>\n                    <br />\n                    <br />\n                    <button  class=\"btn btn-warning \" type=\"submit\" name=\"action\">Submit\n\n                    </button>\n                </form>\n                        </div>\n              </div>\n              <div class=\"col-sm-6 px-0 d-none d-sm-block\">\n                <img src=\"login.jpg\" alt=\"login image\" class=\"login-img\"/>\n              </div>\n            </div>\n          </div>\n        )\n    }\n}\n\nexport default NewCandidate;\n"]},"metadata":{},"sourceType":"module"}